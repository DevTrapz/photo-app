services:
  front-end:
    build:
      dockerfile: Dockerfile.front-end
    container_name: photo-app-front-end
    volumes:
      - ./front-end/:/app
      - "${IMAGE_DATA_DIR}:/app/data"
      - front-end-node-modules:/app/node_modules
    ports:
      - "5173:5173"
    networks:
      front-end:
    command: npm run dev

  back-end:
    build:
      dockerfile: Dockerfile.back-end
    container_name: photo-app-back-end
    volumes:
      - ./back-end/:/app
      - "${IMAGE_DATA_DIR}:/app/data"
      - back-end-node-modules:/app/node_modules
    ports:
      - "3000:3000"
    networks:
      back-end:
    command: npm start

volumes:
  front-end-node-modules:
  back-end-node-modules:


networks:
  back-end:
    name: photo-app-back-end
    ipam:
      driver: default
  front-end:
    name: photo-app-front-end
    ipam:
      driver: default
